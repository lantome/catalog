(this.webpackJsonpfly=this.webpackJsonpfly||[]).push([[0],{12:function(t,e,a){t.exports={catalog:"styles_catalog__2XKEu",catalog__image:"styles_catalog__image__wp7nR",catalog__button:"styles_catalog__button__3DV8y"}},14:function(t,e,a){t.exports={header:"styles_header__WchN6",header__inner:"styles_header__inner__2TFUL",header__buttons:"styles_header__buttons__1slCx",header__button:"styles_header__button__37IqH"}},20:function(t,e,a){t.exports={container:"styles_container__20H0D",container__flex:"styles_container__flex__2uAsM",catalog__button:"styles_catalog__button__25GgN"}},24:function(t,e,a){t.exports={container:"styles_container__1SLd3",container__allPrice:"styles_container__allPrice__NjCGq"}},27:function(t,e,a){t.exports={container:"styles_container__3anah",fetching:"styles_fetching__2d3Pa"}},40:function(t,e,a){t.exports={lds__default:"styles_lds__default__2mMPh","lds-default":"styles_lds-default__9Ps93"}},48:function(t,e,a){},72:function(t,e,a){"use strict";a.r(e);var n={};a.r(n),a.d(n,"addCartItemAC",(function(){return T})),a.d(n,"setFullCartAC",(function(){return E})),a.d(n,"deleteCartItemAC",(function(){return A})),a.d(n,"setCatalogInitAC",(function(){return y})),a.d(n,"setCatalogErrorAC",(function(){return N})),a.d(n,"setCatalogSuccessAC",(function(){return S})),a.d(n,"setCatalogAC",(function(){return I}));var c,r=a(17),s=a.n(r),i=a(10),o=a(11),l=a(3),_=(a(48),a(24)),d=a.n(_),u=a(20),j=a.n(u),b=a(16),O=a(36),f=a(19),h=a(9);!function(t){t.CATALOG_FETCH_SUCCESS="CATALOG_FETCH_SUCCESS",t.CATALOG_FETCHING="CATALOG_FETCHING",t.CATALOG_FETCH_ERROR="CATALOG_FETCH_ERROR",t.ADD_CART_ITEM="CARDITEM",t.DELETE_CART_ITEM="DELETE_CARD_ITEM",t.SET_FULL_CART="SET_FULL_CART"}(c||(c={}));var C={items:[],loading:!1,error:null,cart:[]},x=a(25),g=a.n(x),m=a(37),p=a(38),v=a.n(p);var T=function(t){return{type:c.ADD_CART_ITEM,payload:t}},E=function(t){return{type:c.SET_FULL_CART,payload:t}},A=function(t){return{type:c.DELETE_CART_ITEM,payload:t}},y=function(){return{type:c.CATALOG_FETCHING}},N=function(t){return{type:c.CATALOG_FETCH_ERROR,payload:t}},S=function(t){return{type:c.CATALOG_FETCH_SUCCESS,payload:t}},I=function(){return function(){var t=Object(m.a)(g.a.mark((function t(e){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(y()),t.prev=1,t.next=4,v.a.get("https://appevent.ru/dev/task1/catalog").then((function(t){return t.data.items}));case 4:a=t.sent,setTimeout((function(){e(S(a))}),500),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0),e(N("Catalog fetching error"));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},L=Object(b.b)({catalog:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.CATALOG_FETCH_SUCCESS:return Object(h.a)(Object(h.a)({},t),{},{items:e.payload,loading:!1,error:null});case c.CATALOG_FETCHING:return Object(h.a)(Object(h.a)({},t),{},{loading:!0,error:null,items:[]});case c.CATALOG_FETCH_ERROR:return Object(h.a)(Object(h.a)({},t),{},{loading:!1,error:e.payload,items:[]});case c.ADD_CART_ITEM:return Object(h.a)(Object(h.a)({},t),{},{cart:[].concat(Object(f.a)(t.cart),[{id:e.payload.id,name:e.payload.name,image:e.payload.image,price:e.payload.price}])});case c.SET_FULL_CART:return Object(h.a)(Object(h.a)({},t),{},{cart:e.payload});case c.DELETE_CART_ITEM:return Object(h.a)(Object(h.a)({},t),{},{cart:t.cart.filter((function(t){return t.id!==e.payload}))});default:return t}}}),R=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||b.c,F=Object(b.d)(L,R(Object(b.a)(O.a))),G=i.c,D=a(1),H=function(t){var e=t.addBuy,a=Object(i.b)(),c=G((function(t){return t.catalog})).cart;return Object(D.jsxs)("div",{className:j.a.container,children:[Object(D.jsx)("div",{children:e.name}),Object(D.jsxs)("div",{className:j.a.container__flex,children:[Object(D.jsxs)("div",{children:[e.price," \u20bd"]}),Object(D.jsx)("div",{children:Object(D.jsx)("button",{className:j.a.catalog__button,onClick:function(){a(n.deleteCartItemAC(e.id)),localStorage.setItem("cart",JSON.stringify(c.filter((function(t){return t.id!==e.id}))))},children:"\u0423\u0431\u0440\u0430\u0442\u044c"})})]})]})},M=a(0),k=function(){var t=Object(i.b)(),e=G((function(t){return t.catalog})).cart,a=JSON.parse(localStorage.getItem("cart"));Object(M.useEffect)((function(){t(n.setFullCartAC(a))}),[t]);var c=a.map((function(t){return t.price}));return Object(D.jsxs)("div",{className:d.a.container,children:[e.length?e.map((function(t){return Object(D.jsx)(H,{addBuy:t},t.id)})):Object(D.jsx)("h1",{children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"}),Object(D.jsx)("div",{children:c.length>0?Object(D.jsxs)("div",{className:d.a.container__allPrice,children:["\u0418\u0442\u043e\u0433\u043e \u0441 \u0432\u0430\u0441: ",c.reduce((function(t,e){return t+e}))," \u20bd"]}):""})]})},U=a(14),w=a.n(U),J=function(){var t=JSON.parse(localStorage.getItem("cart")),e=G((function(t){return t.catalog})).cart;return Object(D.jsx)("header",{className:w.a.header,children:Object(D.jsx)("div",{className:"container",children:Object(D.jsx)("div",{className:w.a.header__inner,children:Object(D.jsxs)("div",{className:w.a.header__buttons,children:[Object(D.jsx)(o.b,{to:"/",children:Object(D.jsx)("button",{className:w.a.header__button,children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"})}),Object(D.jsx)(o.b,{to:"/basket",children:Object(D.jsxs)("button",{className:w.a.header__button,children:["\u041a\u043e\u0440\u0437\u0438\u043d\u0430: ",e.length||t.length]})})]})})})})},P=a(40),B=a.n(P),X=function(){return Object(D.jsxs)("div",{className:B.a.lds__default,children:[Object(D.jsx)("div",{}),Object(D.jsx)("div",{}),Object(D.jsx)("div",{}),Object(D.jsx)("div",{}),Object(D.jsx)("div",{}),Object(D.jsx)("div",{}),Object(D.jsx)("div",{}),Object(D.jsx)("div",{}),Object(D.jsx)("div",{}),Object(D.jsx)("div",{}),Object(D.jsx)("div",{}),Object(D.jsx)("div",{})]})},q=a(12),V=a.n(q),K=function(t){var e=t.catalog,a=t.currentCartState,c=void 0===a?[]:a,r=Object(i.b)(),s=c.find((function(t){return t.id===e.id}));return Object(D.jsxs)("div",{className:V.a.catalog,children:[Object(D.jsx)("div",{children:Object(D.jsx)("img",{className:V.a.catalog__image,src:e.image,alt:"catalog item"})}),Object(D.jsx)("div",{className:V.a.catalog__name,children:e.name}),Object(D.jsxs)("div",{className:V.a.catalog__price,children:["\u0426\u0435\u043d\u0430: ",e.price," \u20bd"]}),s?Object(D.jsx)("div",{children:Object(D.jsx)(o.b,{to:"/basket",children:Object(D.jsx)("button",{className:V.a.catalog__button,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})})}):Object(D.jsx)("div",{children:Object(D.jsx)("button",{onClick:function(){r(n.addCartItemAC({id:e.id,image:e.image,name:e.name,price:e.price})),localStorage.setItem("cart",JSON.stringify([].concat(Object(f.a)(c),[e])))},className:V.a.catalog__button,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})})]})},W=a(27),z=a.n(W),Q=function(){var t=G((function(t){return t.catalog})),e=t.items,a=t.loading,n=JSON.parse(localStorage.getItem("cart"));return Object(D.jsx)("div",{children:a?Object(D.jsx)("div",{className:z.a.fetching,children:Object(D.jsx)(X,{})}):Object(D.jsx)("div",{className:z.a.container,children:e.map((function(t){return Object(D.jsx)(K,{catalog:t,currentCartState:n},t.id)}))})})},Y=function(){var t=Object(i.b)();return localStorage.getItem("cart")||localStorage.setItem("cart","[]"),t(I()),Object(D.jsxs)(o.a,{children:[Object(D.jsx)(J,{}),Object(D.jsx)("div",{className:"container",children:Object(D.jsxs)(l.d,{children:[Object(D.jsx)(l.b,{exact:!0,path:"/",component:Q}),Object(D.jsx)(l.b,{exact:!0,path:"/basket",component:k}),Object(D.jsx)(l.a,{to:"/"})]})})]})};s.a.render(Object(D.jsx)(i.a,{store:F,children:Object(D.jsx)(Y,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.770f16de.chunk.js.map